(this["webpackJsonpprotein-visualizer"]=this["webpackJsonpprotein-visualizer"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},108:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),c=a.n(r),o=(a(103),a(8)),i=a(154),s=a(158),u=a(157),d=a(143),f=a(155),m=(a(104),function(e){var t=e.options,a=e.updateSel,r=Object(n.useRef)(null),c=Object(n.useState)(""),i=Object(o.a)(c,2),m=i[0],p=i[1],b=function(e){var t=[];return t.push(l.a.createElement(u.a,{value:" ",key:"default"},"None")),e.forEach((function(e,a){var n=e.value,r=e.label,c=l.a.createElement(u.a,{value:a,key:"key".concat(n)},r);t.push(c)})),t}(t);return l.a.createElement(d.a,{variant:"outlined",className:"drop-down"},l.a.createElement(s.a,{ref:r,id:"demo-simple-select-outlined-label"},"Protein Name"),l.a.createElement(f.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:m,onChange:function(e){var t=e.target.value;p(t),a(t)},autoWidth:!0},b))}),p=a(56),b=a(29),g=["#c76861","#e6c11e","#90de1b","#1bde97","#1bc7de","#1b66de","#421bde","#901bde","#d618d3","#d6186a"],v=a(148),h=a(149),E=a(150),y=a(151),S=a(50),O=a.n(S),j=a(147),w=(a(108),Object(j.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:18,textDecoration:"underline"},pos:{marginBottom:12}}));function x(e){var t=e.glycoslation,a=e.disulfideBonds,r=e.toggleGlyco,c=e.toggleSulfide,i=e.length,s=Object(n.useState)(!0),u=Object(o.a)(s,2),d=u[0],f=u[1],m=Object(n.useState)(!0),p=Object(o.a)(m,2),b=p[0],g=p[1],S=w(),j=function(e){"sulfide"===e?(c(!b),g(!b)):(r(!d),f(!d))};return l.a.createElement(v.a,{variant:"outlined",classes:{root:"legend--wrapper"}},l.a.createElement(h.a,null,l.a.createElement(E.a,{className:S.title,color:"textSecondary",gutterBottom:!0},"Legend"),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(E.a,null,"Total Glyco Bonds:",l.a.createElement(E.a,{display:"inline",classes:{root:"bold-text"}},t.length)),l.a.createElement("div",{className:"button-visibility".concat(d?"--on":"--off")},l.a.createElement(y.a,{"aria-label":"delete",className:{root:"on"},onClick:function(){return j("glyco")}},l.a.createElement(O.a,null)))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(E.a,null,"Total Sulfide Bonds:",l.a.createElement(E.a,{display:"inline",classes:{root:"bold-text"}},a.length)),l.a.createElement("div",{className:"button-visibility".concat(b?"--on":"--off")},l.a.createElement(y.a,{"aria-label":"delete",onClick:function(){return j("sulfide")}},l.a.createElement(O.a,null)))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(E.a,null,"Total Protein Length:",l.a.createElement(E.a,{display:"inline",classes:{root:"bold-text"}},i)))))}x.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var k=x,N=a(160),I=a(71),B=a.n(I),F=(a(110),Object(j.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:18,textDecoration:"underline"},pos:{marginBottom:12}}));function W(e){e.toggleGlyco,e.toggleSulfide;var t=e.length,a=e.updateWindowStart,r=e.updateWindowEnd,c=Object(n.useState)(!0),i=Object(o.a)(c,2),s=(i[0],i[1],Object(n.useState)(!0)),u=Object(o.a)(s,2),d=(u[0],u[1],F()),f=Object(n.useState)(0),m=Object(o.a)(f,2),p=(m[0],m[1],Object(n.useState)(t)),b=Object(o.a)(p,2);b[0],b[1];return l.a.createElement("div",{className:"window--wrapper"},l.a.createElement(v.a,{variant:"outlined",classes:{root:"window--display"}},l.a.createElement(h.a,null,l.a.createElement(E.a,{className:d.title,color:"textSecondary",gutterBottom:!0},"Protein Window Input"),l.a.createElement("div",{className:"window--menuItem"},l.a.createElement(E.a,null,"Total Protein Length:",l.a.createElement(E.a,{display:"inline",classes:{root:"bold-text"}},t))),l.a.createElement("div",{className:"window--menuItem"},l.a.createElement(N.a,{id:"outlined-basic",defaultValue:0,label:"Start",variant:"outlined",onChange:function(e){return a(e.target.value)}}),l.a.createElement(N.a,{id:"outlined-basic",defaultValue:t,label:"End",variant:"outlined",onChange:function(e){return r(e.target.value)}}),l.a.createElement("div",{className:"button-visibility--on"},l.a.createElement(y.a,{onClick:function(){return console.log("clicked")}},l.a.createElement(B.a,null)))))))}W.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var L=W,P=(a(111),g),C={1:1,2:2.5,3:2,4:1.9,5:2,6:2.2,7:2.5,8:2.9,9:3.6,10:4.6,11:6.8,12:12,13:59,14:-15,15:-7};function T(e){var t=e.height,a=e.width,r=e.currSelection,c=e.isLegendOpen,i=e.initialOptions,s=e.scaleFactor,u=e.fullScale,d=e.setFullScaleDisabled,f=i[r],m=f.disulfideBonds,g=f.glycoslation,v=f.length,h=Object(n.useRef)(null),E=Object(n.useRef)(null),y=Object(n.useState)({start:0,end:v}),S=Object(o.a)(y,2),O=S[0],j=S[1],w=O.start,x=O.end,N=Object(n.useState)(!1),I=Object(o.a)(N,2),B=(I[0],I[1],Object(n.useState)(!0)),F=Object(o.a)(B,2),W=F[0],T=F[1],z=Object(n.useState)(!0),G=Object(o.a)(z,2),D=G[0],V=G[1],R=1!==s,A=R?s:1,J=a*A,_={top:t/15,right:J/15,bottom:t/15,left:J/15},H=J-_.left-_.right,M=t-_.top-_.bottom,$=M/2+15,q=.5*A*J/15,K=.5*a/15,Q=H+q,U=a-2*a/15,X=i[r].disulfideBonds.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t}));d(v<3e3);var Y=function(e){var t=[];return e.forEach((function(a,n){for(var l=1,r=Object(o.a)(a,2),c=r[0],i=r[1],s=0;s<e.length;s+=1)if(n!==s){var u=Object(o.a)(e[s],2),d=u[0],f=u[1];c<d&&i>f&&(l+=1),c<d&&i>d&&i<f&&(l+=.7),c>d&&c<f&&i>f&&(l+=.75)}t.push(l)})),t}(X),Z=Object(b.b)().domain([0,v]).range([u?0:q,u?v:Q]),ee=Object(b.b)().domain([w,x]).range([u?0:K,u?v:U]),te=function(e){return $+40*Y[e]},ae=function(e,t){var n=Object(b.c)(e);n.style("background-color","white");var l=t?a/15:_.left,r=t?a/15:_.top,c=n.append("g");c.attr("transform","translate(".concat(l,", ").concat(r,")")),function(e,t){var a=e.append("rect"),n=u?v:H;t&&(n=U,console.log("attachSpine -> innerWidth",H),console.log("attachSpine -> spineWidth",n),console.log("spine start pos",q),console.log("attachSpine -> WINDOW_SPINE_START_POS",K)),a.attr("width",n).attr("height",30).attr("x",t?K:q).attr("y",M/2).style("fill","white").style("stroke","black")}(c,t),D&&function(e,t){var a=m.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t})),n=t?ee:Z;t&&(a=a.filter((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return a>=w&&n<=x}))),a.forEach((function(t,a){var l=Object(o.a)(t,2),r=l[0],c=l[1];t.forEach((function(t){e.append("circle").attr("cx",n(t)).attr("cy",$).attr("r",5).style("stroke","black").style("fill",P[a%P.length]),e.append("line").attr("x1",n(t)).attr("y1",$+20).attr("x2",n(t)).attr("y2",te(a)).style("stroke","black"),e.append("text").attr("dx",n(t)-5).attr("dy",te(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(t)+4).attr("dy",te(a)+20+5).text((function(){return"".concat(t)})).attr("class","sulfide-labels--pos")})),e.append("line").attr("x1",n(r)).attr("y1",te(a)).attr("x2",n(c)).attr("y2",te(a)).style("stroke","black")}))}(c,t),W&&function(e,t){var a=g.map((function(e){return parseInt(e,10)}));t&&(a=a.filter((function(e){return e>=w&&x})));var n=t?ee:Z;a.forEach((function(t){e.append("text").attr("dx",n(t)-5).attr("dy",$+5).text((function(){return"N"})).attr("class","glyco-labels"),e.append("text").attr("dx",n(t)+3).attr("dy",$+7).text((function(){return"".concat(t)})).attr("class","glyco-labels--pos"),e.append("line").attr("x1",n(t)).attr("y1",$-10).attr("x2",n(t)).attr("y2",$-60).style("stroke","black"),e.append("circle").attr("cx",n(t)).attr("cy",$-60).attr("r",8).style("stroke","black").style("fill","black"),e.append("line").attr("x1",n(t)).attr("y1",$-60).attr("x2",n(t)).attr("y2",$-60-20).style("stroke","black"),e.append("line").attr("x1",n(t)).attr("y1",$-60-20).attr("x2",n(t)).attr("y2",$-60-35).style("stroke","black"),e.append("line").attr("x1",n(t)).attr("y1",$-60-35).attr("x2",n(t)).attr("y2",$-60-45).style("stroke","black"),e.append("circle").attr("cx",n(t)).attr("cy",$-60-20).attr("r",8).style("stroke","black").style("fill","grey"),e.append("rect").attr("width",14).attr("height",14).attr("x",n(t)-7).attr("y",$-60-50).style("fill","white").style("stroke","black")}))}(c,t),t||function(e){e.append("text").attr("dx",q-50).attr("dy",M/2+20).text((function(){return"NH2--"}))}(c)};Object(n.useEffect)((function(){["text","line","circle","rect"].forEach((function(e){Object(b.d)(e).remove()})),ae("#svg"),ae("#windowSvg",!0),document.getElementById("svg").style.marginLeft=1!==s?H/C[s]:u?.95*v+2*_.left:0}),[h.current,D,W,R,s,u,w,x]);var ne=Number.isInteger(r)?l.a.createElement("svg",{height:"".concat(t),width:"".concat(u?v+2*_.left:J+_.left),ref:h,id:"svg",overflow:"visible"},l.a.createElement("rect",null)):null,le=Number.isInteger(r)?l.a.createElement("div",{className:"windowSvg--wrapper"},l.a.createElement("svg",{height:"".concat(t),width:"".concat(a),ref:E,id:"windowSvg",overflow:"visible"},l.a.createElement("rect",null))):null;return l.a.createElement("div",{className:"svg-wrapper"},c?l.a.createElement(k,{glycoslation:g,disulfideBonds:m,toggleGlyco:T,toggleSulfide:V,length:v}):null,ne,l.a.createElement(L,{length:v,updateWindowStart:function(e){j(Object(p.a)({},O,{start:e}))},updateWindowEnd:function(e){j(Object(p.a)({},O,{end:e}))}}),le)}T.defaultProps={isLegendOpen:!1,setFullScaleDisabled:function(){},scaleFactor:1,fullScale:!1,height:500,width:500};var z=T,G=a(152),D=a(153),V=a(161),R=a(77),A=a(73),J=a.n(A),_=a(75),H=a.n(_),M=a(74),$=a.n(M),q=a(162),K=(a(112),Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})));function Q(e){var t=e.toggleLegend,a=e.scaleVisualization,r=e.setScaleFactor,c=e.toggleFullScale,i=e.disableFullScale,s=e.fullScale,d=K(),f=Object(n.useState)(null),m=Object(o.a)(f,2),p=m[0],b=m[1],g=Boolean(p),v=function(){b(null)};return l.a.createElement(G.a,null,l.a.createElement(D.a,null,l.a.createElement(V.a,{title:"Toggle Legend"},l.a.createElement(y.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"menu",onClick:t},l.a.createElement(J.a,null))),l.a.createElement(V.a,{title:"Turn off Scaling (Proteins must have min 3000 length)"},l.a.createElement(y.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"scale",onClick:function(){c()},disabled:i},l.a.createElement($.a,null))),l.a.createElement(E.a,{variant:"h6",className:d.title},"Sun Lab"),l.a.createElement("div",null,l.a.createElement(V.a,{title:"Increase Scaling Ratio"},l.a.createElement(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",disabled:s,onClick:function(e){b(e.currentTarget),a()},color:"inherit"},l.a.createElement(H.a,null))),l.a.createElement(R.a,{id:"menu-appbar",anchorEl:p,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:v,classes:{paper:"wide-menu"}},l.a.createElement(u.a,{onClick:v},l.a.createElement(E.a,{id:"discrete-slider",gutterBottom:!0},"Protein Scaling Factor")),l.a.createElement(u.a,{onClick:v,classes:{root:"menuItem--large"}},l.a.createElement(q.a,{defaultValue:1,getAriaValueText:function(e){return r(e),"".concat(e,"x")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:15}))))))}Q.defaultProps={scaleVisualization:function(){},setScaleFactor:function(){},disableFullScale:!1,fullScale:!1};var U=Q,X=(a(114),a(42)),Y=a.n(X),Z=a(76),ee=a.n(Z);function te(){var e;return Y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.a.awrap(Object(b.a)(ee.a));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}var ae=function(e){var t=e.replace(/'/g,'"');return JSON.parse(t)},ne=function(){var e;return Y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,Y.a.awrap(te());case 3:return t.sent.forEach((function(t){var a={};a.value=t["Entry name"],a.label=t["Entry name"],a.description=t["Protein names"],a.disulfideBonds=ae(t["Dislfide bond"]),a.glycoslation=ae(t.Glycosylation),a.length=parseInt(t.Length,10),e.push(a)})),t.abrupt("return",e);case 6:case"end":return t.stop()}}))},le=window,re=le.innerWidth,ce=le.innerHeight;var oe=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],d=s[1],f=Object(n.useState)(!0),p=Object(o.a)(f,2),b=p[0],g=p[1],v=Object(n.useState)([]),h=Object(o.a)(v,2),E=h[0],y=h[1],S=Object(n.useState)(1),O=Object(o.a)(S,2),j=O[0],w=O[1],x=Object(n.useState)(!1),k=Object(o.a)(x,2),N=k[0],I=k[1],B=Object(n.useState)(!0),F=Object(o.a)(B,2),W=F[0],L=F[1];return Object(n.useEffect)((function(){ne().then((function(e){return y(e)}))}),[]),l.a.createElement(i.b,{injectFirst:!0},l.a.createElement("div",{className:"App"},l.a.createElement(U,{toggleLegend:function(){g(!b)},scaleVisualization:function(){d(!u)},setScaleFactor:function(e){w(e)},toggleFullScale:function(){I(!N)},disableFullScale:W,fullScale:N}),l.a.createElement("div",{className:"App-dropdown"},E.length?l.a.createElement(m,{options:E,updateSel:function(e){r(null),setTimeout((function(){return r(e)}),500)}}):null),null!=a&&Number.isInteger(a)?l.a.createElement(z,{width:re,height:ce,currSelection:a,isLegendOpen:b,initialOptions:E,scaleFactor:j,fullScale:N,setFullScaleDisabled:L}):l.a.createElement("div",{className:"App-canvas"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a.p+"static/media/proteins.2080b9bf.csv"},98:function(e,t,a){e.exports=a(116)}},[[98,1,2]]]);
//# sourceMappingURL=main.9eda2c7d.chunk.js.map