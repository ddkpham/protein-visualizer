(this["webpackJsonpprotein-visualizer"]=this["webpackJsonpprotein-visualizer"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),c=a.n(l),o=(a(89),a(10)),i=a(141),s=a(144),u=a(143),d=a(133),f=a(142),p=(a(90),function(e){var t=e.options,a=e.updateSel;console.log("TCL: options",t);var l=Object(n.useRef)(null),c=Object(n.useState)(""),i=Object(o.a)(c,2),p=i[0],m=i[1],g=function(e){var t=[];return t.push(r.a.createElement(u.a,{value:" ",key:"default"},"None")),e.forEach((function(e,a){var n=e.value,l=e.label,c=r.a.createElement(u.a,{value:a,key:"key".concat(n)},l);t.push(c)})),t}(t);return r.a.createElement(d.a,{variant:"outlined",className:"drop-down"},r.a.createElement(s.a,{ref:l,id:"demo-simple-select-outlined-label"},"Protein Name"),r.a.createElement(f.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:p,onChange:function(e){var t=e.target.value;m(t),a(t)},autoWidth:!0},g))}),m=["#c76861","#e6c11e","#90de1b","#1bde97","#1bc7de","#1b66de","#421bde","#901bde","#d618d3","#d6186a"],g=a(33),b=a(135),h=a(136),v=a(137),y=a(138),E=a(52),x=a.n(E),O=a(134),k=(a(94),Object(O.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:18,textDecoration:"underline"},pos:{marginBottom:12}}));function j(e){var t=e.glycoslation,a=e.disulfideBonds,l=e.toggleGlyco,c=e.toggleSulfide,i=e.length,s=Object(n.useState)(!0),u=Object(o.a)(s,2),d=u[0],f=u[1],p=Object(n.useState)(!0),m=Object(o.a)(p,2),g=m[0],E=m[1],O=k(),j=(r.a.createElement("span",{className:O.bullet},"\u2022"),function(e){"sulfide"===e?(console.log("toggling sulfide"),c(!g),E(!g)):(l(!d),f(!d))});return r.a.createElement(b.a,{variant:"outlined",classes:{root:"legend--wrapper"}},r.a.createElement(h.a,null,r.a.createElement(v.a,{className:O.title,color:"textSecondary",gutterBottom:!0},"Legend"),r.a.createElement("div",{className:"legend--menuItem"},r.a.createElement(v.a,null,"Total Glyco Bonds:",t.length),r.a.createElement("div",{className:"button-visibility".concat(d?"--on":"--off")},r.a.createElement(y.a,{"aria-label":"delete",className:{root:"on"},onClick:function(){return j("glyco")}},r.a.createElement(x.a,null)))),r.a.createElement("div",{className:"legend--menuItem"},r.a.createElement(v.a,null,"Total Sulfide Bonds:",a.length),r.a.createElement("div",{className:"button-visibility".concat(g?"--on":"--off")},r.a.createElement(y.a,{"aria-label":"delete",onClick:function(){return j("sulfide")}},r.a.createElement(x.a,null)))),r.a.createElement("div",{className:"legend--menuItem"},r.a.createElement(v.a,null,"Total Protein Length:",i))))}j.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var w=j,S=a(36),N=a.n(S),B=a(66),L=a.n(B);function I(){var e;return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.awrap(Object(g.a)(L.a));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}var z=function(e){var t=e.replace(/'/g,'"');return JSON.parse(t)},C=function(){var e;return N.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,N.a.awrap(I());case 3:return t.sent.forEach((function(t){var a={};a.value=t["Entry name"],a.label=t["Entry name"],a.description=t["Protein names"],a.disulfideBonds=z(t["Dislfide bond"]),a.glycoslation=z(t.Glycosylation),a.length=parseInt(t.Length,10),e.push(a)})),t.abrupt("return",e);case 6:case"end":return t.stop()}}))},T=(a(97),m),F={1:1,2:2.5,3:2,4:1.9,5:2,6:2.2,7:2.5,8:2.9,9:3.6,10:4.6};function V(e){var t=e.height,a=e.width,l=e.currSelection,c=e.isLegendOpen,i=e.initialOptions,s=(e.scaleVisualization,e.scaleFactor),u=1!==s,d=u?s:1,f=a*d,p=Object(n.useRef)(null),m=Object(n.useState)(!0),b=Object(o.a)(m,2),h=b[0],v=b[1],y=Object(n.useState)(!0),E=Object(o.a)(y,2),x=E[0],O=E[1],k=Object(n.useState)(!1),j=Object(o.a)(k,2),S=(j[0],j[1],i[l]),N=S.disulfideBonds,B=S.glycoslation,L=function(e){var t=[];return e.forEach((function(a,n){for(var r=1,l=Object(o.a)(a,2),c=l[0],i=l[1],s=0;s<e.length;s+=1)if(n!==s){var u=Object(o.a)(e[s],2),d=u[0],f=u[1];c<d&&i>f&&(r+=1),c<d&&i>d&&i<f&&(r+=.7),c>d&&c<f&&i>f&&(r+=.75)}t.push(r)})),t}(i[l].disulfideBonds.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t}))),I={top:t/15,right:f/15,bottom:t/15,left:f/15},z=f-I.left-I.right,C=t-I.top-I.bottom,V=C/2+15,G=.5*I.left,P=z+G,A=Object(g.b)().domain([0,i[l].length]).range([d*G,P]),W=function(e){return V+40*L[e]},D=function(){var e=Object(g.c)("#svg");e.style("background-color","white");var t=e.append("g");t.attr("transform","translate(".concat(I.left,", ").concat(I.top,")")),function(e){e.append("rect").attr("width",z).attr("height",30).attr("x",d*G).attr("y",C/2).style("fill","white").style("stroke","black")}(t),x&&function(e){i[l].disulfideBonds.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t})).forEach((function(t,a){var n=Object(o.a)(t,2),r=n[0],l=n[1];t.forEach((function(t){e.append("circle").attr("cx",A(t)).attr("cy",V).attr("r",5).style("stroke","black").style("fill",T[a%T.length]),console.log("TCL: idx -> xScale(el)",a,A(t)),e.append("line").attr("x1",A(t)).attr("y1",V+20).attr("x2",A(t)).attr("y2",W(a)).style("stroke","black"),e.append("text").attr("dx",A(t)-5).attr("dy",W(a)+20).text((function(){return"S"})),e.append("text").attr("dx",A(t)+4).attr("dy",W(a)+20+5).text((function(){return"".concat(t)})).attr("class","sulfide-labels--pos")})),e.append("line").attr("x1",A(r)).attr("y1",W(a)).attr("x2",A(l)).attr("y2",W(a)).style("stroke","black")}))}(t),h&&function(e){i[l].glycoslation.map((function(e){return parseInt(e,10)})).forEach((function(t){e.append("text").attr("dx",A(t)-5).attr("dy",V+5).text((function(){return"N"})).attr("class","glyco-labels"),e.append("text").attr("dx",A(t)+3).attr("dy",V+7).text((function(){return"".concat(t)})).attr("class","glyco-labels--pos"),e.append("line").attr("x1",A(t)).attr("y1",V-10).attr("x2",A(t)).attr("y2",V-60).style("stroke","black"),e.append("circle").attr("cx",A(t)).attr("cy",V-60).attr("r",8).style("stroke","black").style("fill","black"),e.append("line").attr("x1",A(t)).attr("y1",V-60).attr("x2",A(t)).attr("y2",V-60-20).style("stroke","black"),e.append("line").attr("x1",A(t)).attr("y1",V-60-20).attr("x2",A(t)).attr("y2",V-60-35).style("stroke","black"),e.append("line").attr("x1",A(t)).attr("y1",V-60-35).attr("x2",A(t)).attr("y2",V-60-45).style("stroke","black"),e.append("circle").attr("cx",A(t)).attr("cy",V-60-20).attr("r",8).style("stroke","black").style("fill","grey"),e.append("rect").attr("width",14).attr("height",14).attr("x",A(t)-7).attr("y",V-60-50).style("fill","white").style("stroke","black")}))}(t),function(e){e.append("text").attr("dx",d*G-50).attr("dy",C/2+20).text((function(){return"NH2--"}))}(t)};Object(n.useEffect)((function(){["text","line","circle","rect"].forEach((function(e){Object(g.d)(e).remove()})),D(),document.getElementById("svg").style.marginLeft=u?z/F[s]:0}),[p.current,x,h,u,s]);var J=Number.isInteger(l)?r.a.createElement("svg",{height:"".concat(t),width:"".concat(f+I.left),ref:p,id:"svg",overflow:"visible"},r.a.createElement("rect",null)):null;return r.a.createElement("div",{className:"svg-wrapper"},c?r.a.createElement(w,{glycoslation:B,disulfideBonds:N,toggleGlyco:v,toggleSulfide:O,length:i[l].length}):null,J)}V.defaultProps={isLegendOpen:!1,scaleVisualization:!1,scaleFactor:1,height:500,width:500};var G=V,P=a(139),A=a(140),W=a(69),D=a(67),J=a.n(D),R=a(68),H=a.n(R),M=a(145),$=(a(98),Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})));function q(e){var t=e.toggleLegend,a=e.scaleVisualization,l=e.setScaleFactor,c=$(),i=Object(n.useState)(null),s=Object(o.a)(i,2),d=s[0],f=s[1],p=Boolean(d),m=function(){f(null)};return r.a.createElement(P.a,null,r.a.createElement(A.a,null,r.a.createElement(y.a,{edge:"start",className:c.menuButton,color:"inherit","aria-label":"menu",onClick:t},r.a.createElement(J.a,null)),r.a.createElement(v.a,{variant:"h6",className:c.title},"Sun Lab"),r.a.createElement("div",null,r.a.createElement(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){f(e.currentTarget),a()},color:"inherit"},r.a.createElement(H.a,null)),r.a.createElement(W.a,{id:"menu-appbar",anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:m,classes:{paper:"wide-menu"}},r.a.createElement(u.a,{onClick:m},r.a.createElement(v.a,{id:"discrete-slider",gutterBottom:!0},"Protein Scaling Factor")),r.a.createElement(u.a,{onClick:m,classes:{root:"menuItem--large"}},r.a.createElement(M.a,{defaultValue:1,getAriaValueText:function(e){return l(e),"".concat(e,"x")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10}))))))}q.defaultProps={scaleVisualization:function(){}};var K=q,Q=(a(99),C),U=window,X=U.innerWidth,Y=U.innerHeight;var Z=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],d=s[1],f=Object(n.useState)(!0),m=Object(o.a)(f,2),g=m[0],b=m[1],h=Object(n.useState)([]),v=Object(o.a)(h,2),y=v[0],E=v[1],x=Object(n.useState)(1),O=Object(o.a)(x,2),k=O[0],j=O[1];return console.log("TCL: App -> scaleFactor",k),Object(n.useEffect)((function(){Q().then((function(e){return E(e)}))}),[]),r.a.createElement(i.b,{injectFirst:!0},r.a.createElement("div",{className:"App"},r.a.createElement(K,{toggleLegend:function(){b(!g)},scaleVisualization:function(){d(!u)},setScaleFactor:function(e){j(e)}}),r.a.createElement("div",{className:"App-dropdown"},y.length?r.a.createElement(p,{options:y,updateSel:function(e){l(null),setTimeout((function(){return l(e)}),500)}}):null),null!=a&&Number.isInteger(a)?r.a.createElement(G,{width:X,height:Y,currSelection:a,isLegendOpen:g,initialOptions:y,scaleVisualization:u,scaleFactor:k}):r.a.createElement("div",{className:"App-canvas"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,a){e.exports=a.p+"static/media/proteins.2080b9bf.csv"},84:function(e,t,a){e.exports=a(100)},89:function(e,t,a){},90:function(e,t,a){},94:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.ca75bc32.chunk.js.map