(this["webpackJsonpprotein-visualizer"]=this["webpackJsonpprotein-visualizer"]||[]).push([[0],{109:function(e,t,a){e.exports=a(128)},114:function(e,t,a){},115:function(e,t,a){},119:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),i=a.n(r),c=(a(114),a(7)),o=a(170),s=a(175),u=a(174),d=a(157),p=a(171),f=(a(115),function(e){var t=e.options,a=e.updateSel,r=Object(n.useRef)(null),i=Object(n.useState)(""),o=Object(c.a)(i,2),f=o[0],m=o[1],b=function(e){var t=[];return t.push(l.a.createElement(u.a,{value:" ",key:"default"},"None")),e.forEach((function(e,a){var n=e.value,r=e.label,i=l.a.createElement(u.a,{value:a,key:"key".concat(n)},r);t.push(i)})),t}(t);return l.a.createElement(d.a,{variant:"outlined",className:"drop-down"},l.a.createElement(s.a,{ref:r,id:"demo-simple-select-outlined-label"},"Protein Name"),l.a.createElement(p.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:f,onChange:function(e){var t=e.target.value;m(t),a(t)},autoWidth:!0},b))}),m=a(45),b=a(30),g=["#c76861","#e6c11e","#90de1b","#1bde97","#1bc7de","#1b66de","#421bde","#901bde","#d618d3","#d6186a"],h=a(162),y=a(163),v=a(164),E=a(173),x=a(165),O=a(55),w=a.n(O),j=a(161),S=(a(119),Object(j.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:20,textDecoration:"none",color:"#cb2d39",fontWeight:"bold",marginBottom:"15px"},pos:{marginBottom:12}}));function k(e){var t=e.glycoslation,a=e.disulfideBonds,r=e.toggleGlyco,i=e.toggleSulfide,o=e.length,s=Object(n.useState)(!0),u=Object(c.a)(s,2),d=u[0],p=u[1],f=Object(n.useState)(!0),m=Object(c.a)(f,2),b=m[0],g=m[1],O=S(),j=function(e){"sulfide"===e?(i(!b),g(!b)):(r(!d),p(!d))};return l.a.createElement(h.a,{variant:"outlined",raised:!0,classes:{root:"legend--wrapper"}},l.a.createElement(y.a,null,l.a.createElement("div",{className:"legend--header"},l.a.createElement(v.a,{className:O.title,color:"textSecondary",gutterBottom:!0,display:"inline"},"Legend")),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Glyco Bonds:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},t.length)),l.a.createElement("div",{className:"button-visibility".concat(d?"--on":"--off")},l.a.createElement(E.a,{title:"toggle visibility",placement:"right-end"},l.a.createElement(x.a,{"aria-label":"delete",className:{root:"on"},onClick:function(){return j("glyco")}},l.a.createElement(w.a,null))))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Sulfide Bonds:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},a.length)),l.a.createElement("div",{className:"button-visibility".concat(b?"--on":"--off")},l.a.createElement(E.a,{title:"toggle visibility",placement:"right-end"},l.a.createElement(x.a,{"aria-label":"delete",onClick:function(){return j("sulfide")}},l.a.createElement(w.a,null))))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Protein Length:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},o)))))}k.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var N=k,I=a(177),B=(a(122),Object(j.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:20,textDecoration:"none",color:"#cb2d39",fontWeight:"bold",marginBottom:"10px"},pos:{marginBottom:12}}));function F(e){e.toggleGlyco,e.toggleSulfide;var t=e.length,a=e.updateWindowStart,r=e.updateWindowEnd,i=Object(n.useState)(!0),o=Object(c.a)(i,2),s=(o[0],o[1],Object(n.useState)(!0)),u=Object(c.a)(s,2),d=(u[0],u[1],B()),p=Object(n.useState)(0),f=Object(c.a)(p,2),m=(f[0],f[1],Object(n.useState)(t)),b=Object(c.a)(m,2);b[0],b[1];return l.a.createElement("div",{className:"window--wrapper"},l.a.createElement(h.a,{variant:"outlined",classes:{root:"window--display"}},l.a.createElement(y.a,null,l.a.createElement(v.a,{className:d.title,color:"textSecondary",gutterBottom:!0},"Protein Window Input"),l.a.createElement("div",{className:"window--menuItem"},l.a.createElement(v.a,null,"Total Protein Length:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},t))),l.a.createElement("div",{className:"window--menuItem"},l.a.createElement(I.a,{id:"outlined-basic",defaultValue:0,label:"Start",variant:"outlined",onChange:function(e){return a(e.target.value)}}),l.a.createElement(I.a,{id:"outlined-basic",defaultValue:t,label:"End",variant:"outlined",onChange:function(e){return r(e.target.value)}})))))}F.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var z=F,W=(a(123),g);function L(e){var t=e.height,a=e.width,r=e.currSelection,i=e.isLegendOpen,o=e.initialOptions,s=e.scaleFactor,u=e.fullScale,d=e.setFullScaleDisabled,p=o[r],f=p.disulfideBonds,g=p.glycoslation,h=p.length;console.log("Visualization -> proteinLength",h);var y=Object(n.useRef)(null),v=Object(n.useRef)(null),E=Object(n.useState)({start:0,end:h}),x=Object(c.a)(E,2),O=x[0],w=x[1],j=O.start,S=O.end,k=Object(n.useState)(!1),I=Object(c.a)(k,2),B=(I[0],I[1],Object(n.useState)(!0)),F=Object(c.a)(B,2),L=F[0],P=F[1],T=Object(n.useState)(!0),C=Object(c.a)(T,2),G=C[0],V=C[1],D=1!==s,R={top:t/15,right:a/15,bottom:t/15,left:a/15},A=t-R.top-R.bottom,J=A/2+15,H=.1*R.left,M=a*s-2*s*R.left,$=a-2*R.left,_=o[r].disulfideBonds.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t}));d(h<3e3);var q=function(e){var t=[];return e.forEach((function(a,n){for(var l=1,r=Object(c.a)(a,2),i=r[0],o=r[1],s=0;s<e.length;s+=1)if(n!==s){var u=Object(c.a)(e[s],2),d=u[0],p=u[1];i<d&&o>p&&(l+=1),i<d&&o>d&&o<p&&(l+=.55),i>d&&i<p&&o>p&&(l+=.75)}t.push(l)})),t}(_),K=Object(b.b)().domain([0,h]).range([u?0:30,u?h:M]),Q=Object(b.b)().domain([j,S]).range([u?0:H,u?h:$]),U=function(e){return J+40*q[e]},X=function(e,t){var n=Object(b.c)(e);n.style("background-color","white");var l=t?a/15:R.left,r=t?a/15:R.top,i=n.append("g");i.attr("transform","translate(".concat(l,", ").concat(r,")")),function(e,t){var a=e.append("rect"),n=u?h:M,l=t?H:30;t&&(n=$),a.attr("width",n).attr("height",30).attr("x",l).attr("y",A/2).style("fill","white").style("stroke","black")}(i,t),G&&function(e,t){var a=f.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t})),n=t?Q:K;if(t){a=a.filter((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return a>=j&&n<=S}));var l=f.filter((function(e){var t=e.split(" "),a=Object(c.a)(t,2),n=a[0],l=a[1],r=parseInt(n,10),i=parseInt(l,10);return r<j&&i<=S&&i>j}));console.log("attachSulfides -> leftBonds",l),l.forEach((function(t,a){var l=t.split(" "),r=Object(c.a)(l,2),i=(r[0],r[1]);e.append("circle").attr("cx",n(i)).attr("cy",J).attr("r",5).style("stroke","black").style("fill",W[a%W.length]),e.append("line").attr("x1",n(i)).attr("y1",J+20).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black"),e.append("text").attr("dx",n(i)-5).attr("dy",U(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(i)+4).attr("dy",U(a)+20+5).text((function(){return"".concat(i)})).attr("class","sulfide-labels--pos"),e.append("line").attr("x1",H).attr("y1",U(a)).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black")})),f.filter((function(e){var t=e.split(" "),a=Object(c.a)(t,2),n=a[0],l=a[1],r=parseInt(n,10),i=parseInt(l,10);return r>j&&r<=S&&i>S})).forEach((function(t,a){var l=t.split(" "),r=Object(c.a)(l,2),i=r[0];r[1];e.append("circle").attr("cx",n(i)).attr("cy",J).attr("r",5).style("stroke","black").style("fill",W[a%W.length]),e.append("line").attr("x1",n(i)).attr("y1",J+20).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black"),e.append("text").attr("dx",n(i)-5).attr("dy",U(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(i)+4).attr("dy",U(a)+20+5).text((function(){return"".concat(i)})).attr("class","sulfide-labels--pos"),e.append("line").attr("x1",n(i)).attr("y1",U(a)).attr("x2",n(S)).attr("y2",U(a)).style("stroke","black")}))}a.forEach((function(t,a){var l=Object(c.a)(t,2),r=l[0],i=l[1];t.forEach((function(t){e.append("circle").attr("cx",n(t)).attr("cy",J).attr("r",5).style("stroke","black").style("fill",W[a%W.length]),e.append("line").attr("x1",n(t)).attr("y1",J+20).attr("x2",n(t)).attr("y2",U(a)).style("stroke","black"),e.append("text").attr("dx",n(t)-5).attr("dy",U(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(t)+4).attr("dy",U(a)+20+5).text((function(){return"".concat(t)})).attr("class","sulfide-labels--pos")})),e.append("line").attr("x1",n(r)).attr("y1",U(a)).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black")}))}(i,t),L&&function(e,t){var a=g.map((function(e){return parseInt(e,10)}));t&&(a=a.filter((function(e){return e>=j&&e<=S})));var n=t?Q:K;a.forEach((function(t){e.append("text").attr("dx",n(t)-5).attr("dy",J+5).text((function(){return"N"})).attr("class","glyco-labels"),e.append("text").attr("dx",n(t)+3).attr("dy",J+7).text((function(){return"".concat(t)})).attr("class","glyco-labels--pos"),e.append("line").attr("x1",n(t)).attr("y1",J-10).attr("x2",n(t)).attr("y2",J-60).style("stroke","black"),e.append("circle").attr("cx",n(t)).attr("cy",J-60).attr("r",8).style("stroke","black").style("fill","black"),e.append("line").attr("x1",n(t)).attr("y1",J-60).attr("x2",n(t)).attr("y2",J-60-20).style("stroke","black"),e.append("line").attr("x1",n(t)).attr("y1",J-60-20).attr("x2",n(t)).attr("y2",J-60-35).style("stroke","black"),e.append("line").attr("x1",n(t)).attr("y1",J-60-35).attr("x2",n(t)).attr("y2",J-60-45).style("stroke","black"),e.append("circle").attr("cx",n(t)).attr("cy",J-60-20).attr("r",8).style("stroke","black").style("fill","grey"),e.append("rect").attr("width",14).attr("height",14).attr("x",n(t)-7).attr("y",J-60-50).style("fill","white").style("stroke","black")}))}(i,t),t||function(e){e.append("text").attr("dx",-20).attr("dy",A/2+20).text((function(){return"NH2--"}))}(i)};Object(n.useEffect)((function(){["text","line","circle","rect"].forEach((function(e){Object(b.d)(e).remove()})),X("#svg"),X("#windowSvg",!0),document.getElementById("svg").style.marginLeft=1!==s?(s-1)*window.innerWidth:0}),[y.current,G,L,D,s,u,j,S]);var Y=Number.isInteger(r)?l.a.createElement("svg",{height:"".concat(t),width:"".concat(u?h+2*R.left:window.innerWidth*s),ref:y,id:"svg",overflow:"visible"},l.a.createElement("rect",null)):null,Z=Number.isInteger(r)?l.a.createElement("div",{className:"windowSvg--wrapper"},l.a.createElement("svg",{height:"".concat(t),width:"".concat(a),ref:v,id:"windowSvg",overflow:"visible"},l.a.createElement("rect",null))):null;return l.a.createElement("div",{className:"svg-wrapper"},i?l.a.createElement(N,{glycoslation:g,disulfideBonds:f,toggleGlyco:P,toggleSulfide:V,length:h}):null,Y,l.a.createElement(z,{length:h,updateWindowStart:function(e){w(Object(m.a)(Object(m.a)({},O),{},{start:parseInt(e,10)}))},updateWindowEnd:function(e){w(Object(m.a)(Object(m.a)({},O),{},{end:parseInt(e,10)}))}}),Z)}L.defaultProps={isLegendOpen:!1,setFullScaleDisabled:function(){},scaleFactor:1,fullScale:!1,height:500,width:500};var P=L,T=a(166),C=a(167),G=a(83),V=a(78),D=a.n(V),R=a(80),A=a.n(R),J=a(79),H=a.n(J),M=a(178),$=(a(124),Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})));function _(e){var t=e.toggleLegend,a=e.scaleVisualization,r=e.setScaleFactor,i=e.toggleFullScale,o=e.disableFullScale,s=e.fullScale,d=$(),p=Object(n.useState)(null),f=Object(c.a)(p,2),m=f[0],b=f[1],g=Boolean(m),h=function(){b(null)};return l.a.createElement(T.a,null,l.a.createElement(C.a,null,l.a.createElement(E.a,{title:"Toggle Legend"},l.a.createElement(x.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"menu",onClick:t},l.a.createElement(D.a,null))),l.a.createElement(E.a,{title:"Turn off Scaling (Proteins must have min 3000 length)"},l.a.createElement(x.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"scale",onClick:function(){i()},disabled:o},l.a.createElement(H.a,null))),l.a.createElement(v.a,{variant:"h6",className:d.title},"Sun Lab"),l.a.createElement("div",null,l.a.createElement(E.a,{title:"Increase Scaling Factor"},l.a.createElement(x.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",disabled:s,onClick:function(e){b(e.currentTarget),a()},color:"inherit"},l.a.createElement(A.a,null))),l.a.createElement(G.a,{id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:h,classes:{paper:"wide-menu"}},l.a.createElement(u.a,{onClick:h},l.a.createElement(v.a,{id:"discrete-slider",gutterBottom:!0},"Protein Scaling Factor")),l.a.createElement(u.a,{onClick:h,classes:{root:"menuItem--large"}},l.a.createElement(M.a,{defaultValue:1,getAriaValueText:function(e){return r(e),"".concat(e,"x")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:15}))))))}_.defaultProps={scaleVisualization:function(){},setScaleFactor:function(){},disableFullScale:!1,fullScale:!1};var q=_,K=a(168),Q=a(169),U=a(81),X=a.n(U);a(125);var Y=function(e){return l.a.createElement("div",null,l.a.createElement(h.a,{className:"introduction--wrapper"},l.a.createElement(K.a,null,l.a.createElement(Q.a,{component:"img",alt:"lab logo",height:"140",image:X.a,className:"introduction--logo",onClick:function(){window.location.href="http://www.sfu.ca/chemistry/groups/bingyun_sun/"}})),l.a.createElement(y.a,{className:"introduction--body"},l.a.createElement(v.a,{variant:"h5",className:"introduction--title"},"Read Me"),l.a.createElement(v.a,{variant:"body1"},"This web application was built to visualize protein glycoslyation sites and sulfide bonds to illustrate patterns in their arrangement."),l.a.createElement("ul",null,l.a.createElement("li",{className:"introduction--bullet"},l.a.createElement(v.a,{variant:"body2",display:"inline"},"Select a protein to visualize from the drop down menu located above this card. There are several example proteins for selection."," ")),l.a.createElement("li",{className:"introduction--bullet"},l.a.createElement(v.a,{variant:"body2",display:"inline"},"If the current scale of the visualization is not sufficient to identify patterns , on the top right of the app bar is a sliding scale to horizontally expand the protein.")),l.a.createElement("li",{className:"introduction--bullet"},l.a.createElement(v.a,{variant:"body2",display:"inline"},"In addition to scaling, there is also a window feature that allows users to target a specific region for visualization. This is particularily useful when scaling alone is not sufficient to seperate patterns. The window feature is located below the original visualization."))))))},Z=(a(126),a(44)),ee=a.n(Z),te=a(61),ae=a(82),ne=a.n(ae);function le(){return re.apply(this,arguments)}function re(){return(re=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(ne.a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=function(e){var t=e.replace(/'/g,'"');return JSON.parse(t)},ce={getProteins:function(){var e=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,le();case 3:return e.sent.forEach((function(e){var a={};a.value=e["Entry name"],a.label=e["Entry name"],a.description=e["Protein names"],a.disulfideBonds=ie(e["Dislfide bond"]),a.glycoslation=ie(e.Glycosylation),a.length=parseInt(e.Length,10),t.push(a)})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}.getProteins,oe=window,se=oe.innerWidth,ue=oe.innerHeight;var de=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!0),s=Object(c.a)(i,2),u=s[0],d=s[1],p=Object(n.useState)(!1),m=Object(c.a)(p,2),b=m[0],g=m[1],h=Object(n.useState)(!0),y=Object(c.a)(h,2),v=y[0],E=y[1],x=Object(n.useState)([]),O=Object(c.a)(x,2),w=O[0],j=O[1],S=Object(n.useState)(1),k=Object(c.a)(S,2),N=k[0],I=k[1],B=Object(n.useState)(!1),F=Object(c.a)(B,2),z=F[0],W=F[1],L=Object(n.useState)(!0),T=Object(c.a)(L,2),C=T[0],G=T[1];Object(n.useEffect)((function(){ce().then((function(e){return j(e)}))}),[]);var V=u?l.a.createElement(Y,null):null;return l.a.createElement(o.b,{injectFirst:!0},l.a.createElement("div",{className:"App"},l.a.createElement(q,{toggleLegend:function(){E(!v)},scaleVisualization:function(){g(!b)},setScaleFactor:function(e){I(e)},toggleFullScale:function(){W(!z)},disableFullScale:C,fullScale:z}),l.a.createElement("div",{className:"App-dropdown"},w.length?l.a.createElement(f,{options:w,updateSel:function(e){r(null),d(!1),setTimeout((function(){return r(e)}),500),Number.isInteger(e)||d(!0)}}):null),null!=a&&Number.isInteger(a)?l.a.createElement(P,{width:se,height:ue,currSelection:a,isLegendOpen:v,initialOptions:w,scaleFactor:N,fullScale:z,setFullScaleDisabled:G}):l.a.createElement("div",null,V)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,t,a){e.exports=a.p+"static/media/sunlab.730a03c0.png"},82:function(e,t,a){e.exports=a.p+"static/media/proteins.80b7f8bb.csv"}},[[109,1,2]]]);
//# sourceMappingURL=main.11a86d0f.chunk.js.map