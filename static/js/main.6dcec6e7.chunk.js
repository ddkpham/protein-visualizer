(this["webpackJsonpprotein-visualizer"]=this["webpackJsonpprotein-visualizer"]||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),c=a.n(r),o=(a(95),a(10)),i=a(148),s=a(152),u=a(151),d=a(139),f=a(149),m=(a(96),function(e){var t=e.options,a=e.updateSel,r=Object(n.useRef)(null),c=Object(n.useState)(""),i=Object(o.a)(c,2),m=i[0],p=i[1],b=function(e){var t=[];return t.push(l.a.createElement(u.a,{value:" ",key:"default"},"None")),e.forEach((function(e,a){var n=e.value,r=e.label,c=l.a.createElement(u.a,{value:a,key:"key".concat(n)},r);t.push(c)})),t}(t);return l.a.createElement(d.a,{variant:"outlined",className:"drop-down"},l.a.createElement(s.a,{ref:r,id:"demo-simple-select-outlined-label"},"Protein Name"),l.a.createElement(f.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:m,onChange:function(e){var t=e.target.value;p(t),a(t)},autoWidth:!0},b))}),p=["#c76861","#e6c11e","#90de1b","#1bde97","#1bc7de","#1b66de","#421bde","#901bde","#d618d3","#d6186a"],b=a(36),g=a(142),h=a(143),v=a(144),y=a(145),E=a(54),x=a.n(E),O=a(141),S=(a(100),Object(O.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:18,textDecoration:"underline"},pos:{marginBottom:12}}));function k(e){var t=e.glycoslation,a=e.disulfideBonds,r=e.toggleGlyco,c=e.toggleSulfide,i=e.length,s=Object(n.useState)(!0),u=Object(o.a)(s,2),d=u[0],f=u[1],m=Object(n.useState)(!0),p=Object(o.a)(m,2),b=p[0],E=p[1],O=S(),k=(l.a.createElement("span",{className:O.bullet},"\u2022"),function(e){"sulfide"===e?(console.log("toggling sulfide"),c(!b),E(!b)):(r(!d),f(!d))});return l.a.createElement(g.a,{variant:"outlined",classes:{root:"legend--wrapper"}},l.a.createElement(h.a,null,l.a.createElement(v.a,{className:O.title,color:"textSecondary",gutterBottom:!0},"Legend"),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Glyco Bonds:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},t.length)),l.a.createElement("div",{className:"button-visibility".concat(d?"--on":"--off")},l.a.createElement(y.a,{"aria-label":"delete",className:{root:"on"},onClick:function(){return k("glyco")}},l.a.createElement(x.a,null)))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Sulfide Bonds:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},a.length)),l.a.createElement("div",{className:"button-visibility".concat(b?"--on":"--off")},l.a.createElement(y.a,{"aria-label":"delete",onClick:function(){return k("sulfide")}},l.a.createElement(x.a,null)))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Protein Length:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},i)))))}k.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var j=k,w=(a(102),p),N={1:1,2:2.5,3:2,4:1.9,5:2,6:2.2,7:2.5,8:2.9,9:3.6,10:4.6,11:6.8,12:12,13:59,14:-15,15:-7};function B(e){var t=e.height,a=e.width,r=e.currSelection,c=e.isLegendOpen,i=e.initialOptions,s=(e.scaleVisualization,e.scaleFactor),u=e.fullScale,d=e.setFullScaleDisabled,f=1!==s,m=f?s:1,p=a*m,g=Object(n.useRef)(null),h=Object(n.useState)(!0),v=Object(o.a)(h,2),y=v[0],E=v[1],x=Object(n.useState)(!0),O=Object(o.a)(x,2),S=O[0],k=O[1],B=i[r],F=B.disulfideBonds,I=B.glycoslation,L=B.length,z=i[r].disulfideBonds.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t}));d(L<3e3);var C=function(e){var t=[];return e.forEach((function(a,n){for(var l=1,r=Object(o.a)(a,2),c=r[0],i=r[1],s=0;s<e.length;s+=1)if(n!==s){var u=Object(o.a)(e[s],2),d=u[0],f=u[1];c<d&&i>f&&(l+=1),c<d&&i>d&&i<f&&(l+=.7),c>d&&c<f&&i>f&&(l+=.75)}t.push(l)})),t}(z),T={top:t/15,right:p/15,bottom:t/15,left:p/15},P=p-T.left-T.right,V=t-T.top-T.bottom,D=V/2+15,G=.5*T.left,A=P+G,W=m*G,R=Object(b.b)().domain([0,L]).range([u?0:W,u?L:A]),J=function(e){return D+40*C[e]},H=function(){var e=Object(b.c)("#svg");e.style("background-color","white");var t=e.append("g");t.attr("transform","translate(".concat(T.left,", ").concat(T.top,")")),function(e){e.append("rect").attr("width",u?L:P).attr("height",30).attr("x",m*G).attr("y",V/2).style("fill","white").style("stroke","black")}(t),S&&function(e){F.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t})).forEach((function(t,a){var n=Object(o.a)(t,2),l=n[0],r=n[1];t.forEach((function(t){e.append("circle").attr("cx",R(t)).attr("cy",D).attr("r",5).style("stroke","black").style("fill",w[a%w.length]),e.append("line").attr("x1",R(t)).attr("y1",D+20).attr("x2",R(t)).attr("y2",J(a)).style("stroke","black"),e.append("text").attr("dx",R(t)-5).attr("dy",J(a)+20).text((function(){return"S"})),e.append("text").attr("dx",R(t)+4).attr("dy",J(a)+20+5).text((function(){return"".concat(t)})).attr("class","sulfide-labels--pos")})),e.append("line").attr("x1",R(l)).attr("y1",J(a)).attr("x2",R(r)).attr("y2",J(a)).style("stroke","black")}))}(t),y&&function(e){I.map((function(e){return parseInt(e,10)})).forEach((function(t){e.append("text").attr("dx",R(t)-5).attr("dy",D+5).text((function(){return"N"})).attr("class","glyco-labels"),e.append("text").attr("dx",R(t)+3).attr("dy",D+7).text((function(){return"".concat(t)})).attr("class","glyco-labels--pos"),e.append("line").attr("x1",R(t)).attr("y1",D-10).attr("x2",R(t)).attr("y2",D-60).style("stroke","black"),e.append("circle").attr("cx",R(t)).attr("cy",D-60).attr("r",8).style("stroke","black").style("fill","black"),e.append("line").attr("x1",R(t)).attr("y1",D-60).attr("x2",R(t)).attr("y2",D-60-20).style("stroke","black"),e.append("line").attr("x1",R(t)).attr("y1",D-60-20).attr("x2",R(t)).attr("y2",D-60-35).style("stroke","black"),e.append("line").attr("x1",R(t)).attr("y1",D-60-35).attr("x2",R(t)).attr("y2",D-60-45).style("stroke","black"),e.append("circle").attr("cx",R(t)).attr("cy",D-60-20).attr("r",8).style("stroke","black").style("fill","grey"),e.append("rect").attr("width",14).attr("height",14).attr("x",R(t)-7).attr("y",D-60-50).style("fill","white").style("stroke","black")}))}(t),function(e){e.append("text").attr("dx",m*G-50).attr("dy",V/2+20).text((function(){return"NH2--"}))}(t)};Object(n.useEffect)((function(){["text","line","circle","rect"].forEach((function(e){Object(b.d)(e).remove()})),H(),document.getElementById("svg").style.marginLeft=1!==s?P/N[s]:u?.95*L+2*T.left:0}),[g.current,S,y,f,s,u]);var M=Number.isInteger(r)?l.a.createElement("svg",{height:"".concat(t),width:"".concat(u?L+2*T.left:p+T.left),ref:g,id:"svg",overflow:"visible"},l.a.createElement("rect",null)):null;return l.a.createElement("div",{className:"svg-wrapper"},c?l.a.createElement(j,{glycoslation:I,disulfideBonds:F,toggleGlyco:E,toggleSulfide:k,length:L}):null,M)}B.defaultProps={isLegendOpen:!1,scaleVisualization:!1,setFullScaleDisabled:function(){},scaleFactor:1,fullScale:!1,height:500,width:500};var F=B,I=a(146),L=a(147),z=a(153),C=a(73),T=a(69),P=a.n(T),V=a(71),D=a.n(V),G=a(70),A=a.n(G),W=a(154),R=(a(103),Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})));function J(e){var t=e.toggleLegend,a=e.scaleVisualization,r=e.setScaleFactor,c=e.toggleFullScale,i=e.disableFullScale,s=e.fullScale,d=R(),f=Object(n.useState)(null),m=Object(o.a)(f,2),p=m[0],b=m[1],g=Boolean(p),h=function(){b(null)};return l.a.createElement(I.a,null,l.a.createElement(L.a,null,l.a.createElement(z.a,{title:"Toggle Legend"},l.a.createElement(y.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"menu",onClick:t},l.a.createElement(P.a,null))),l.a.createElement(z.a,{title:"Turn off Scaling (Proteins must have min 3000 length)"},l.a.createElement(y.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"scale",onClick:function(){c()},disabled:i},l.a.createElement(A.a,null))),l.a.createElement(v.a,{variant:"h6",className:d.title},"Sun Lab"),l.a.createElement("div",null,l.a.createElement(z.a,{title:"Increase Scaling Ratio"},l.a.createElement(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",disabled:s,onClick:function(e){b(e.currentTarget),a()},color:"inherit"},l.a.createElement(D.a,null))),l.a.createElement(C.a,{id:"menu-appbar",anchorEl:p,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:h,classes:{paper:"wide-menu"}},l.a.createElement(u.a,{onClick:h},l.a.createElement(v.a,{id:"discrete-slider",gutterBottom:!0},"Protein Scaling Factor")),l.a.createElement(u.a,{onClick:h,classes:{root:"menuItem--large"}},l.a.createElement(W.a,{defaultValue:1,getAriaValueText:function(e){return r(e),"".concat(e,"x")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:15}))))))}J.defaultProps={scaleVisualization:function(){},setScaleFactor:function(){}};var H=J,M=(a(105),a(41)),$=a.n(M),q=a(72),K=a.n(q);function Q(){var e;return $.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.a.awrap(Object(b.a)(K.a));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}var U=function(e){var t=e.replace(/'/g,'"');return JSON.parse(t)},X=function(){var e;return $.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,$.a.awrap(Q());case 3:return t.sent.forEach((function(t){var a={};a.value=t["Entry name"],a.label=t["Entry name"],a.description=t["Protein names"],a.disulfideBonds=U(t["Dislfide bond"]),a.glycoslation=U(t.Glycosylation),a.length=parseInt(t.Length,10),e.push(a)})),t.abrupt("return",e);case 6:case"end":return t.stop()}}))},Y=window,Z=Y.innerWidth,_=Y.innerHeight;var ee=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],d=s[1],f=Object(n.useState)(!0),p=Object(o.a)(f,2),b=p[0],g=p[1],h=Object(n.useState)([]),v=Object(o.a)(h,2),y=v[0],E=v[1],x=Object(n.useState)(1),O=Object(o.a)(x,2),S=O[0],k=O[1],j=Object(n.useState)(!1),w=Object(o.a)(j,2),N=w[0],B=w[1],I=Object(n.useState)(!0),L=Object(o.a)(I,2),z=L[0],C=L[1];return console.log("TCL: App -> fullScaleDisabled",z),Object(n.useEffect)((function(){X().then((function(e){return E(e)}))}),[]),l.a.createElement(i.b,{injectFirst:!0},l.a.createElement("div",{className:"App"},l.a.createElement(H,{toggleLegend:function(){g(!b)},scaleVisualization:function(){d(!u)},setScaleFactor:function(e){k(e)},toggleFullScale:function(){B(!N)},disableFullScale:z,fullScale:N}),l.a.createElement("div",{className:"App-dropdown"},y.length?l.a.createElement(m,{options:y,updateSel:function(e){r(null),setTimeout((function(){return r(e)}),500)}}):null),null!=a&&Number.isInteger(a)?l.a.createElement(F,{width:Z,height:_,currSelection:a,isLegendOpen:b,initialOptions:y,scaleVisualization:u,scaleFactor:S,fullScale:N,setFullScaleDisabled:C}):l.a.createElement("div",{className:"App-canvas"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,a){e.exports=a.p+"static/media/proteins.2080b9bf.csv"},90:function(e,t,a){e.exports=a(107)},95:function(e,t,a){},96:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.6dcec6e7.chunk.js.map