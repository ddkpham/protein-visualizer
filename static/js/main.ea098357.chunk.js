(this["webpackJsonpprotein-visualizer"]=this["webpackJsonpprotein-visualizer"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},109:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),i=a.n(r),c=(a(104),a(7)),o=a(158),s=a(162),u=a(161),d=a(145),f=a(159),p=(a(105),function(e){var t=e.options,a=e.updateSel,r=Object(n.useRef)(null),i=Object(n.useState)(""),o=Object(c.a)(i,2),p=o[0],m=o[1],b=function(e){var t=[];return t.push(l.a.createElement(u.a,{value:" ",key:"default"},"None")),e.forEach((function(e,a){var n=e.value,r=e.label,i=l.a.createElement(u.a,{value:a,key:"key".concat(n)},r);t.push(i)})),t}(t);return l.a.createElement(d.a,{variant:"outlined",className:"drop-down"},l.a.createElement(s.a,{ref:r,id:"demo-simple-select-outlined-label"},"Protein Name"),l.a.createElement(f.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:p,onChange:function(e){var t=e.target.value;m(t),a(t)},autoWidth:!0},b))}),m=a(56),b=a(29),g=["#c76861","#e6c11e","#90de1b","#1bde97","#1bc7de","#1b66de","#421bde","#901bde","#d618d3","#d6186a"],h=a(150),y=a(151),v=a(152),E=a(164),x=a(153),w=a(51),O=a.n(w),S=a(149),j=(a(109),Object(S.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:20,textDecoration:"none",color:"#cb2d39",fontWeight:"bold",marginBottom:"15px"},pos:{marginBottom:12}}));function k(e){var t=e.glycoslation,a=e.disulfideBonds,r=e.toggleGlyco,i=e.toggleSulfide,o=e.length,s=Object(n.useState)(!0),u=Object(c.a)(s,2),d=u[0],f=u[1],p=Object(n.useState)(!0),m=Object(c.a)(p,2),b=m[0],g=m[1],w=j(),S=function(e){"sulfide"===e?(i(!b),g(!b)):(r(!d),f(!d))};return l.a.createElement(h.a,{variant:"outlined",raised:!0,classes:{root:"legend--wrapper"}},l.a.createElement(y.a,null,l.a.createElement("div",{className:"legend--header"},l.a.createElement(v.a,{className:w.title,color:"textSecondary",gutterBottom:!0,display:"inline"},"Legend")),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Glyco Bonds:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},t.length)),l.a.createElement("div",{className:"button-visibility".concat(d?"--on":"--off")},l.a.createElement(E.a,{title:"toggle visibility",placement:"right-end"},l.a.createElement(x.a,{"aria-label":"delete",className:{root:"on"},onClick:function(){return S("glyco")}},l.a.createElement(O.a,null))))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Sulfide Bonds:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},a.length)),l.a.createElement("div",{className:"button-visibility".concat(b?"--on":"--off")},l.a.createElement(E.a,{title:"toggle visibility",placement:"right-end"},l.a.createElement(x.a,{"aria-label":"delete",onClick:function(){return S("sulfide")}},l.a.createElement(O.a,null))))),l.a.createElement("div",{className:"legend--menuItem"},l.a.createElement(v.a,null,"Total Protein Length:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},o)))))}k.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var N=k,I=a(165),B=(a(112),Object(S.a)({root:{Width:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:20,textDecoration:"none",color:"#cb2d39",fontWeight:"bold",marginBottom:"10px"},pos:{marginBottom:12}}));function F(e){e.toggleGlyco,e.toggleSulfide;var t=e.length,a=e.updateWindowStart,r=e.updateWindowEnd,i=Object(n.useState)(!0),o=Object(c.a)(i,2),s=(o[0],o[1],Object(n.useState)(!0)),u=Object(c.a)(s,2),d=(u[0],u[1],B()),f=Object(n.useState)(0),p=Object(c.a)(f,2),m=(p[0],p[1],Object(n.useState)(t)),b=Object(c.a)(m,2);b[0],b[1];return l.a.createElement("div",{className:"window--wrapper"},l.a.createElement(h.a,{variant:"outlined",classes:{root:"window--display"}},l.a.createElement(y.a,null,l.a.createElement(v.a,{className:d.title,color:"textSecondary",gutterBottom:!0},"Protein Window Input"),l.a.createElement("div",{className:"window--menuItem"},l.a.createElement(v.a,null,"Total Protein Length:",l.a.createElement(v.a,{display:"inline",classes:{root:"bold-text"}},t))),l.a.createElement("div",{className:"window--menuItem"},l.a.createElement(I.a,{id:"outlined-basic",defaultValue:0,label:"Start",variant:"outlined",onChange:function(e){return a(e.target.value)}}),l.a.createElement(I.a,{id:"outlined-basic",defaultValue:t,label:"End",variant:"outlined",onChange:function(e){return r(e.target.value)}})))))}F.defaultProps={toggleGlyco:function(){},toggleSulfide:function(){}};var z=F,W=(a(113),g);function L(e){var t=e.height,a=e.width,r=e.currSelection,i=e.isLegendOpen,o=e.initialOptions,s=e.scaleFactor,u=e.fullScale,d=e.setFullScaleDisabled,f=o[r],p=f.disulfideBonds,g=f.glycoslation,h=f.length;console.log("Visualization -> proteinLength",h);var y=Object(n.useRef)(null),v=Object(n.useRef)(null),E=Object(n.useState)({start:0,end:h}),x=Object(c.a)(E,2),w=x[0],O=x[1],S=w.start,j=w.end,k=Object(n.useState)(!1),I=Object(c.a)(k,2),B=(I[0],I[1],Object(n.useState)(!0)),F=Object(c.a)(B,2),L=F[0],T=F[1],C=Object(n.useState)(!0),P=Object(c.a)(C,2),G=P[0],V=P[1],D=1!==s,R={top:t/15,right:a/15,bottom:t/15,left:a/15},A=t-R.top-R.bottom,J=A/2+15,H=.1*R.left,M=a*s-2*s*R.left,$=a-2*R.left,_=o[r].disulfideBonds.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t}));d(h<3e3);var q=function(e){var t=[];return e.forEach((function(a,n){for(var l=1,r=Object(c.a)(a,2),i=r[0],o=r[1],s=0;s<e.length;s+=1)if(n!==s){var u=Object(c.a)(e[s],2),d=u[0],f=u[1];i<d&&o>f&&(l+=1),i<d&&o>d&&o<f&&(l+=.55),i>d&&i<f&&o>f&&(l+=.75)}t.push(l)})),t}(_),K=Object(b.b)().domain([0,h]).range([u?0:30,u?h:M]),Q=Object(b.b)().domain([S,j]).range([u?0:H,u?h:$]),U=function(e){return J+40*q[e]},X=function(e,t){var n=Object(b.c)(e);n.style("background-color","white");var l=t?a/15:R.left,r=t?a/15:R.top,i=n.append("g");i.attr("transform","translate(".concat(l,", ").concat(r,")")),function(e,t){var a=e.append("rect"),n=u?h:M,l=t?H:30;t&&(n=$),a.attr("width",n).attr("height",30).attr("x",l).attr("y",A/2).style("fill","white").style("stroke","black")}(i,t),G&&function(e,t){var a=p.map((function(e){var t=[];return e.split(" ").forEach((function(e){var a=parseInt(e,10);t.push(a)})),t})),n=t?Q:K;if(t){a=a.filter((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return a>=S&&n<=j}));var l=p.filter((function(e){var t=e.split(" "),a=Object(c.a)(t,2),n=a[0],l=a[1],r=parseInt(n,10),i=parseInt(l,10);return r<S&&i<=j&&i>S}));console.log("attachSulfides -> leftBonds",l),l.forEach((function(t,a){var l=t.split(" "),r=Object(c.a)(l,2),i=(r[0],r[1]);e.append("circle").attr("cx",n(i)).attr("cy",J).attr("r",5).style("stroke","black").style("fill",W[a%W.length]),e.append("line").attr("x1",n(i)).attr("y1",J+20).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black"),e.append("text").attr("dx",n(i)-5).attr("dy",U(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(i)+4).attr("dy",U(a)+20+5).text((function(){return"".concat(i)})).attr("class","sulfide-labels--pos"),e.append("line").attr("x1",H).attr("y1",U(a)).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black")})),p.filter((function(e){var t=e.split(" "),a=Object(c.a)(t,2),n=a[0],l=a[1],r=parseInt(n,10),i=parseInt(l,10);return r>S&&r<=j&&i>j})).forEach((function(t,a){var l=t.split(" "),r=Object(c.a)(l,2),i=r[0];r[1];e.append("circle").attr("cx",n(i)).attr("cy",J).attr("r",5).style("stroke","black").style("fill",W[a%W.length]),e.append("line").attr("x1",n(i)).attr("y1",J+20).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black"),e.append("text").attr("dx",n(i)-5).attr("dy",U(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(i)+4).attr("dy",U(a)+20+5).text((function(){return"".concat(i)})).attr("class","sulfide-labels--pos"),e.append("line").attr("x1",n(i)).attr("y1",U(a)).attr("x2",n(j)).attr("y2",U(a)).style("stroke","black")}))}a.forEach((function(t,a){var l=Object(c.a)(t,2),r=l[0],i=l[1];t.forEach((function(t){e.append("circle").attr("cx",n(t)).attr("cy",J).attr("r",5).style("stroke","black").style("fill",W[a%W.length]),e.append("line").attr("x1",n(t)).attr("y1",J+20).attr("x2",n(t)).attr("y2",U(a)).style("stroke","black"),e.append("text").attr("dx",n(t)-5).attr("dy",U(a)+20).text((function(){return"S"})),e.append("text").attr("dx",n(t)+4).attr("dy",U(a)+20+5).text((function(){return"".concat(t)})).attr("class","sulfide-labels--pos")})),e.append("line").attr("x1",n(r)).attr("y1",U(a)).attr("x2",n(i)).attr("y2",U(a)).style("stroke","black")}))}(i,t),L&&function(e,t){var a=g.map((function(e){return parseInt(e,10)}));t&&(a=a.filter((function(e){return e>=S&&e<=j})));var n=t?Q:K;a.forEach((function(t){e.append("text").attr("dx",n(t)-5).attr("dy",J+5).text((function(){return"N"})).attr("class","glyco-labels"),e.append("text").attr("dx",n(t)+3).attr("dy",J+7).text((function(){return"".concat(t)})).attr("class","glyco-labels--pos"),e.append("line").attr("x1",n(t)).attr("y1",J-10).attr("x2",n(t)).attr("y2",J-60).style("stroke","black"),e.append("circle").attr("cx",n(t)).attr("cy",J-60).attr("r",8).style("stroke","black").style("fill","black"),e.append("line").attr("x1",n(t)).attr("y1",J-60).attr("x2",n(t)).attr("y2",J-60-20).style("stroke","black"),e.append("line").attr("x1",n(t)).attr("y1",J-60-20).attr("x2",n(t)).attr("y2",J-60-35).style("stroke","black"),e.append("line").attr("x1",n(t)).attr("y1",J-60-35).attr("x2",n(t)).attr("y2",J-60-45).style("stroke","black"),e.append("circle").attr("cx",n(t)).attr("cy",J-60-20).attr("r",8).style("stroke","black").style("fill","grey"),e.append("rect").attr("width",14).attr("height",14).attr("x",n(t)-7).attr("y",J-60-50).style("fill","white").style("stroke","black")}))}(i,t),t||function(e){e.append("text").attr("dx",-20).attr("dy",A/2+20).text((function(){return"NH2--"}))}(i)};Object(n.useEffect)((function(){["text","line","circle","rect"].forEach((function(e){Object(b.d)(e).remove()})),X("#svg"),X("#windowSvg",!0),document.getElementById("svg").style.marginLeft=1!==s?(s-1)*window.innerWidth:0}),[y.current,G,L,D,s,u,S,j]);var Y=Number.isInteger(r)?l.a.createElement("svg",{height:"".concat(t),width:"".concat(u?h+2*R.left:window.innerWidth*s),ref:y,id:"svg",overflow:"visible"},l.a.createElement("rect",null)):null,Z=Number.isInteger(r)?l.a.createElement("div",{className:"windowSvg--wrapper"},l.a.createElement("svg",{height:"".concat(t),width:"".concat(a),ref:v,id:"windowSvg",overflow:"visible"},l.a.createElement("rect",null))):null;return l.a.createElement("div",{className:"svg-wrapper"},i?l.a.createElement(N,{glycoslation:g,disulfideBonds:p,toggleGlyco:T,toggleSulfide:V,length:h}):null,Y,l.a.createElement(z,{length:h,updateWindowStart:function(e){O(Object(m.a)({},w,{start:parseInt(e,10)}))},updateWindowEnd:function(e){O(Object(m.a)({},w,{end:parseInt(e,10)}))}}),Z)}L.defaultProps={isLegendOpen:!1,setFullScaleDisabled:function(){},scaleFactor:1,fullScale:!1,height:500,width:500};var T=L,C=a(154),P=a(155),G=a(78),V=a(73),D=a.n(V),R=a(75),A=a.n(R),J=a(74),H=a.n(J),M=a(166),$=(a(114),Object(S.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})));function _(e){var t=e.toggleLegend,a=e.scaleVisualization,r=e.setScaleFactor,i=e.toggleFullScale,o=e.disableFullScale,s=e.fullScale,d=$(),f=Object(n.useState)(null),p=Object(c.a)(f,2),m=p[0],b=p[1],g=Boolean(m),h=function(){b(null)};return l.a.createElement(C.a,null,l.a.createElement(P.a,null,l.a.createElement(E.a,{title:"Toggle Legend"},l.a.createElement(x.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"menu",onClick:t},l.a.createElement(D.a,null))),l.a.createElement(E.a,{title:"Turn off Scaling (Proteins must have min 3000 length)"},l.a.createElement(x.a,{edge:"start",className:d.menuButton,color:"inherit","aria-label":"scale",onClick:function(){i()},disabled:o},l.a.createElement(H.a,null))),l.a.createElement(v.a,{variant:"h6",className:d.title},"Sun Lab"),l.a.createElement("div",null,l.a.createElement(E.a,{title:"Increase Scaling Factor"},l.a.createElement(x.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",disabled:s,onClick:function(e){b(e.currentTarget),a()},color:"inherit"},l.a.createElement(A.a,null))),l.a.createElement(G.a,{id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:h,classes:{paper:"wide-menu"}},l.a.createElement(u.a,{onClick:h},l.a.createElement(v.a,{id:"discrete-slider",gutterBottom:!0},"Protein Scaling Factor")),l.a.createElement(u.a,{onClick:h,classes:{root:"menuItem--large"}},l.a.createElement(M.a,{defaultValue:1,getAriaValueText:function(e){return r(e),"".concat(e,"x")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:15}))))))}_.defaultProps={scaleVisualization:function(){},setScaleFactor:function(){},disableFullScale:!1,fullScale:!1};var q=_,K=a(156),Q=a(157),U=a(76),X=a.n(U);a(115);var Y=function(e){return l.a.createElement("div",null,l.a.createElement(h.a,{className:"introduction--wrapper"},l.a.createElement(K.a,null,l.a.createElement(Q.a,{component:"img",alt:"lab logo",height:"140",image:X.a,className:"introduction--logo",onClick:function(){window.location.href="http://www.sfu.ca/chemistry/groups/bingyun_sun/"}})),l.a.createElement(y.a,{className:"introduction--body"},l.a.createElement(v.a,{variant:"h5",className:"introduction--title"},"Read Me"),l.a.createElement(v.a,{variant:"body1"},"This web application was built to visualize protein glycoslyation sites and sulfide bonds to illustrate patterns in their arrangement."),l.a.createElement("ul",null,l.a.createElement("li",{className:"introduction--bullet"},l.a.createElement(v.a,{variant:"body2",display:"inline"},"Select a protein to visualize from the drop down menu located above this card. There are several example proteins for selection."," ")),l.a.createElement("li",{className:"introduction--bullet"},l.a.createElement(v.a,{variant:"body2",display:"inline"},"If the current scale of the visualization is not sufficient to identify patterns , on the top right of the app bar is a sliding scale to horizontally expand the protein.")),l.a.createElement("li",{className:"introduction--bullet"},l.a.createElement(v.a,{variant:"body2",display:"inline"},"In addition to scaling, there is also a window feature that allows users to target a specific region for visualization. This is particularily useful when scaling alone is not sufficient to seperate patterns. The window feature is located below the original visualization."))))))},Z=(a(116),a(41)),ee=a.n(Z),te=a(77),ae=a.n(te);function ne(){var e;return ee.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.a.awrap(Object(b.a)(ae.a));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}var le=function(e){var t=e.replace(/'/g,'"');return JSON.parse(t)},re=function(){var e;return ee.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,ee.a.awrap(ne());case 3:return t.sent.forEach((function(t){var a={};a.value=t["Entry name"],a.label=t["Entry name"],a.description=t["Protein names"],a.disulfideBonds=le(t["Dislfide bond"]),a.glycoslation=le(t.Glycosylation),a.length=parseInt(t.Length,10),e.push(a)})),t.abrupt("return",e);case 6:case"end":return t.stop()}}))},ie=window,ce=ie.innerWidth,oe=ie.innerHeight;var se=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!0),s=Object(c.a)(i,2),u=s[0],d=s[1],f=Object(n.useState)(!1),m=Object(c.a)(f,2),b=m[0],g=m[1],h=Object(n.useState)(!0),y=Object(c.a)(h,2),v=y[0],E=y[1],x=Object(n.useState)([]),w=Object(c.a)(x,2),O=w[0],S=w[1],j=Object(n.useState)(1),k=Object(c.a)(j,2),N=k[0],I=k[1],B=Object(n.useState)(!1),F=Object(c.a)(B,2),z=F[0],W=F[1],L=Object(n.useState)(!0),C=Object(c.a)(L,2),P=C[0],G=C[1];Object(n.useEffect)((function(){re().then((function(e){return S(e)}))}),[]);var V=u?l.a.createElement(Y,null):null;return l.a.createElement(o.b,{injectFirst:!0},l.a.createElement("div",{className:"App"},l.a.createElement(q,{toggleLegend:function(){E(!v)},scaleVisualization:function(){g(!b)},setScaleFactor:function(e){I(e)},toggleFullScale:function(){W(!z)},disableFullScale:P,fullScale:z}),l.a.createElement("div",{className:"App-dropdown"},O.length?l.a.createElement(p,{options:O,updateSel:function(e){r(null),d(!1),setTimeout((function(){return r(e)}),500),Number.isInteger(e)||d(!0)}}):null),null!=a&&Number.isInteger(a)?l.a.createElement(T,{width:ce,height:oe,currSelection:a,isLegendOpen:v,initialOptions:O,scaleFactor:N,fullScale:z,setFullScaleDisabled:G}):l.a.createElement("div",null,V)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a.p+"static/media/sunlab.730a03c0.png"},77:function(e,t,a){e.exports=a.p+"static/media/proteins.2080b9bf.csv"},99:function(e,t,a){e.exports=a(118)}},[[99,1,2]]]);
//# sourceMappingURL=main.ea098357.chunk.js.map